<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Product Details</title>

<link rel="stylesheet" href="style.css">

<style>
/* -------- LUXURY PRODUCT PAGE LAYOUT -------- */
.product-container {
  max-width: 1100px;
  margin: 60px auto;
  padding: 40px;
  background: #111;
  border-radius: 20px;
  display: flex;
  gap: 50px;
  color: white;
  box-shadow: 0 0 25px rgba(255,215,0,0.25);
}

/* IMAGE */
.product-image img {
  width: 420px;
  border-radius: 20px;
  border: 3px solid gold;
  background: #000;
  padding: 10px;
}

/* INFO SECTION */
.product-info h2 {
  font-size: 32px;
  margin-bottom: 10px;
  color: gold;
}

.product-info p {
  font-size: 18px;
  margin: 6px 0;
}

.product-info .price {
  font-size: 26px;
  color: gold;
  margin: 15px 0;
}

/* BUTTONS */
.buttons {
  margin-top: 25px;
  display: flex;
  gap: 15px;
}

.luxury-btn {
  padding: 14px 28px;
  font-size: 17px;
  border: none;
  border-radius: 10px;
  cursor: pointer;
  background: gold;
  color: #000;
  font-weight: bold;
  transition: 0.3s;
}

.luxury-btn:hover {
  background: #d4b400;
}

/* Already added notices */
.notice {
  margin-top: 10px;
  font-size: 15px;
  color: #00ff99;
  font-style: italic;
}
</style>

</head>
<body>

<header>
  <h1>DM-Watches</h1>
  <nav>
    <button onclick="window.location.href='DM-Watches.html'">Home</button>
    <button onclick="window.location.href='shop.html'">Shop</button>
    <button onclick="window.location.href='about1.html'">About</button>
    <button onclick="window.location.href='cart.html'">Cart (<span id="cart-count">0</span>)</button>
    <button onclick="window.location.href='favorites.html'">Favorites (<span id="fav-count">0</span>)</button>
  </nav>
</header>

<div id="product-detail"></div>

<script src="products-data.js"></script>

<script>
/* LOAD PRODUCT */
const PRODUCTS = window.PRODUCTS;
let CART = JSON.parse(localStorage.getItem("CART_ITEMS")) || [];
let FAVS = JSON.parse(localStorage.getItem("FAV_ITEMS")) || [];

/* UPDATE HEADER COUNTS */
document.getElementById("cart-count").textContent = CART.length;
document.getElementById("fav-count").textContent = FAVS.length;

/* GET ID FROM URL */
const url = new URLSearchParams(window.location.search);
const id = url.get("id");
const product = PRODUCTS.find(p => p.id == id);

if (!product) {
  document.getElementById("product-detail").innerHTML = "<h2>Product Not Found</h2>";
} else {
  renderProduct();
}

/* RENDER PRODUCT */
function renderProduct() {
  const container = document.getElementById("product-detail");

  container.innerHTML = `
    <div class="product-container">
    
      <div class="product-image">
        <img src="${product.img}" alt="${product.name}">
      </div>

      <div class="product-info">
        <h2>${product.name}</h2>
        <p><strong>Brand:</strong> ${product.brand}</p>
        <p><strong>Type:</strong> ${product.type}</p>
        <p><strong>Gender:</strong> ${product.gender}</p>

        <p class="price">$${product.price.toLocaleString()}</p>

        <p>${product.desc}</p>

        <div class="buttons">
          <button id="cartBtn" class="luxury-btn">Loading…</button>
          <button id="favBtn" class="luxury-btn">Loading…</button>
          <button id="buyBtn" class="luxury-btn">Buy Now</button>
        </div>

        <div id="cartNotice" class="notice"></div>
        <div id="favNotice" class="notice"></div>
      </div>

    </div>
  `;

  setupButtons();
}

/* BUTTON LOGIC */
function setupButtons() {
  const cartBtn = document.getElementById("cartBtn");
  const favBtn = document.getElementById("favBtn");
  const buyBtn = document.getElementById("buyBtn");
  const cartNotice = document.getElementById("cartNotice");
  const favNotice = document.getElementById("favNotice");

  updateText();

  function updateText() {
    /* CART TEXT */
    if (CART.includes(id)) {
      cartBtn.textContent = "Remove from Cart";
      cartNotice.textContent = "✔ Already in cart";
    } else {
      cartBtn.textContent = "Add to Cart";
      cartNotice.textContent = "";
    }

    /* FAV TEXT */
    if (FAVS.includes(id)) {
      favBtn.textContent = "Remove from Favorites";
      favNotice.textContent = "✔ Already in favorites";
    } else {
      favBtn.textContent = "Add to Favorites";
      favNotice.textContent = "";
    }
  }

  /* CART BUTTON CLICK */
  cartBtn.onclick = () => {
    if (!CART.includes(id)) {
      CART.push(id);
    } else {
      CART = CART.filter(x => x != id);
    }
    localStorage.setItem("CART_ITEMS", JSON.stringify(CART));
    document.getElementById("cart-count").textContent = CART.length;
    updateText();
  };

  /* FAVORITES BUTTON CLICK */
  favBtn.onclick = () => {
    if (!FAVS.includes(id)) {
      FAVS.push(id);
    } else {
      FAVS = FAVS.filter(x => x != id);
    }
    localStorage.setItem("FAV_ITEMS", JSON.stringify(FAVS));
    document.getElementById("fav-count").textContent = FAVS.length;
    updateText();
  };

  /* BUY NOW */
  buyBtn.onclick = () => {
    if (!CART.includes(id)) {
      CART.push(id);
      localStorage.setItem("CART_ITEMS", JSON.stringify(CART));
      document.getElementById("cart-count").textContent = CART.length;
    }
    window.location.href = "cart.html";
  };
}
</script>

</body>
</html>
